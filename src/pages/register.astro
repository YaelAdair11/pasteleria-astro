---
import '../styles/login.css'; // Reutilizamos el mismo CSS

// Leemos si hay un error en la URL (por si algo falla en la API)
const error = Astro.url.searchParams.get('error');
---
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pastelería - Registrarse</title>
</head>
<body>
  <div class="login-container">
    <h1>Punto de Venta</h1>
    <h2>Crear una cuenta</h2>

    {/* Apunta a la nueva API de registro */}
    <form method="POST" action="/api/auth/register">
      <div class="input-group">
        {/* Supabase usa Email como identificador */}
        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="tu@email.com" required />
      </div>

      <div class="input-group">
        <label for="password">Contraseña</label>
        {/* Supabase requiere contraseñas de al menos 6 caracteres */}
        <input type="password" id="password" name="password" placeholder="Mínimo 6 caracteres" required minlength="6" />
      </div>

      <button type="submit" class="btn">Registrarse</button>
    </form>

    {/* Mostramos el error si existe */}
    {error && <p id="message" style="color: red;">{error}</p>}

    {/* Enlace para ir a la página de login */}
    <p style="margin-top: 1rem;">
      ¿Ya tienes una cuenta? <a href="/login">Inicia Sesión</a>
    </p>
  </div>
</body>
</html>