<div class="container mt-3">
  
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Lista de Empleados (HU-34)</h3>
    <button class="btn btn-primary" (click)="mostrarFormulario = !mostrarFormulario">
      <i class="fa-solid fa-plus me-2"></i>
      {{ mostrarFormulario ? 'Cancelar' : 'Agregar Nuevo Empleado' }}
    </button>
  </div>

<div *ngIf="mostrarFormulario" class="card card-body bg-dark text-white mb-4">
    <h4>Nuevo Empleado</h4>
    
    <form (ngSubmit)="guardarEmpleado()" autocomplete="off">
      <div class="mb-3">
        <label for="username" class="form-label">Nombre (Username):</label>
        <input type="text" class="form-control" name="username" 
               [(ngModel)]="nuevoEmpleado.username" required>
      </div>
      
      <div class="mb-3">
        <label for="email" class="form-label">Email (para login):</label>
        <input type="email" class="form-control" name="email" 
               [(ngModel)]="nuevoEmpleado.email" required autocomplete="off">
      </div>
      
      <div class="mb-3">
        <label for="password" class="form-label">Contrase√±a Temporal:</label>
        <input type="password" class="form-control" name="password" 
               [(ngModel)]="nuevoEmpleado.password" required autocomplete="new-password">
      </div>
      
      <button type="submit" class="btn btn-success">Guardar Empleado</button>
    </form>
  </div>


  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Email</th>
          <th>Rol</th> <th>Avatar</th>
          <th>Acciones</th> </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of empleados">
          <td class="text-muted small">{{ emp.id.slice(0, 8) }}...</td>
          <td class="fw-semibold">{{ emp.username }}</td>
          <td>
            <a [href]="'mailto:' + emp.email" class="text-info text-decoration-none">
              {{ emp.email }}
            </a>
          </td>
          <td class="text-capitalize">{{ emp.rol }}</td>
          
          <td>
            <div *ngIf="emp.avatar && emp.avatar !== 'default-avatar.png'; else sinAvatar" 
                 class="avatar-placeholder bg-primary rounded-circle d-inline-flex align-items-center justify-content-center"
                 style="width: 40px; height: 40px;">
              <i class="fa-solid fa-user text-white small"></i>
            </div>
            <ng-template #sinAvatar>
              <span class="text-muted">-</span>
            </ng-template>
          </td>
          
          <td>
            <button class="btn btn-sm btn-warning me-2">Editar</button>
            <button class="btn btn-sm btn-danger">Borrar</button>
          </td>
        </tr>
        
        <tr *ngIf="empleados.length === 0">
          <td colspan="6" class="text-center text-muted">No hay empleados registrados.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>