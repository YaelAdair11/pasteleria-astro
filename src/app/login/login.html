<div id="fondo" class="d-flex vw-100 vh-100 position-absolute z-1">
  <!-- Lado del video -->
  <div class="flex-fill position-relative overflow-hidden">
    <video autoplay muted loop playsinline class="w-100 h-100 object-fit-cover">
      <source src="/videos/fondo.mp4" type="video/mp4" />
      Tu navegador no soporta video HTML5.
    </video>

    <!-- Capa tenue sobre el video (opcional) -->
    <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-25"></div>

    <div class="position-absolute top-0 start-0 w-100 h-100 overflow-auto d-flex"
      style="filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.6));">
      <div class="m-auto text-center text-white d-block">
        <img src="/images/logo.png" alt="Logo Pastelería" class="mb-3" style="width: 14rem;" />
        <h1 class="fw-bold">Pastelería Dulce Arte</h1>
        <p class="fs-5 fst-italic">El arte de endulzar cada momento</p>

        <button id="iniciar" class="btn btn-primary mt-1 mb-3 rounded-pill fs-5 fw-bold py-2" (click)="mostrarLogin($event)">
          ACCESO PERSONAL
        </button>
        
        <br />

        <a id="tienda-link" routerLink="/tienda" class="btn btn-outline-light mt-2 mb-5 rounded-pill fs-5 fw-bold py-2">
          TIENDA EN LÍNEA
        </a>

      </div>
    </div>
  </div>
</div>
<!-- Máscara circular que revela -->
<div id="mask" class="container-fluid d-flex overflow-auto">
 <div class="col-12 col-md-6 col-lg-4 col-xl-3 container-fluid d-flex py-3 overflow-auto m-auto"
    style="background-color: #1e1e2f;">
    <button id="btn-menu" class="btn btn-dark position-absolute rounded-circle shadow-sm d-flex top-0 start-0 m-3 p-0" style="width: 2rem; height: 2rem;" (click)="toggleLogin()">
      <i class="fa-solid fa-angle-left m-auto"></i>
    </button>
    <div class="col-12 col-md-11 mt-0 mt-md-auto mb-md-auto mx-auto text-light">
      <!-- Logo -->
      <div class="text-center mb-4">
        <img src="/images/logo.png" alt="Logo Pastelería" class="mb-2" style="width: 6rem;" />
        <h3 class="card-title text-center text-light fw-light">Pastelería Dulce Arte</h3>
      </div>
      <h3 class="card-title text-center mb-4 text-light fw-bold">Iniciar Sesión</h3>

      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <!-- Correo o Usuario -->
        <div class="mb-3">
          <label for="login" class="form-label fw-semibold">Correo o Usuario</label>
          <div class="input-group">
            <span class="input-group-text bg-white"><i class="fa-solid fa-user"></i></span>
            <input type="text" id="login" class="form-control" formControlName="login"
              placeholder="Ingresa tu correo o usuario"
              [ngClass]="{ 'is-invalid': form.get('login')?.invalid && form.get('login')?.touched }" />
          </div>
          <div *ngIf="form.get('login')?.invalid && form.get('login')?.touched" class="invalid-feedback d-block"
            style="color: #fc5868;">
            Este campo es obligatorio.
          </div>
        </div>

        <!-- Contraseña -->
        <div class="mb-4">
          <label for="password" class="form-label fw-semibold">Contraseña</label>
          <div class="input-group">
            <span class="input-group-text bg-white"><i class="fa-solid fa-lock"></i></span>
            <input type="password" id="password" class="form-control" formControlName="password"
              placeholder="Ingresa tu contraseña"
              [ngClass]="{ 'is-invalid': form.get('password')?.invalid && form.get('password')?.touched }" />
            <button class="btn btn-primary py-0" type="button" (click)="togglePassword()" data-bs-toggle="tooltip" title="Mostrar/Ocultar Contraseña">
              <i id="password-icon" class="fa-solid fa-eye-slash"></i>
            </button>
          </div>
          <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="invalid-feedback d-block"
            style="color: #fc5868;">
            La contraseña es obligatoria.
          </div>
        </div>


        <!-- Error general -->
        <div *ngIf="error" class="alert alert-danger">
          {{ error }}
        </div>

        <!-- Botón -->
        <div class="d-grid">
          <button id="btn-iniciar-sesion" type="submit" class="btn btn-primary" [disabled]="loading">
            {{ loading ? 'Ingresando...' : 'Iniciar Sesión' }}
          </button>
        </div>

        <!-- Contrseña -->
        <div class="mt-4 text-center">
          <a href="/olvide-contrasena" class="btn btn-link fw-semibold">
            ¿Olvidaste tu contraseña?
          </a>
        </div>
      </form>
    </div>
  </div>
</div>